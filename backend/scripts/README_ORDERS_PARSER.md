# –ö–û–ú–ü–õ–ï–ö–°–ù–ò–ô –ü–ê–†–°–ï–† –ó–ê–ú–û–í–õ–ï–ù–¨ –ó GOOGLE SHEETS

## –û–ø–∏—Å
–ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É –∑–∞–º–æ–≤–ª–µ–Ω—å –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ Google Sheets "–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è". –†–µ–∞–ª—ñ–∑—É—î –≤—Å—ñ –≤–∏—è–≤–ª–µ–Ω—ñ –ø–∞—Ç—Ç–µ—Ä–Ω–∏ —Ç–∞ –≤–∏–º–æ–≥–∏ –±—ñ–∑–Ω–µ—Å—É.

## –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### üîç –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏
- **–ö–∞—Ä—Ç–∞**: —Ç–µ—Ä–º—ñ–Ω–∞–ª, –∫–∞—Ä—Ç–æ—é, –∫–∞—Ä—Ç–∫–æ—é, card, –ø—Ä–∏–≤–∞—Ç, –º–æ–Ω–æ, –≤—ñ–∑–æ—é
- **–ì–æ—Ç—ñ–≤–∫–∞**: –≥–æ—Ç—ñ–≤–∫–æ—é, –Ω–∞–ª—ñ—á–Ω—ñ, –≥–æ—Ç—ñ–≤–∫–∞, cash, –≥—Ä–æ—à–µ–π, –Ω–∞–ª–æ–º
- **–ü–µ—Ä–µ–∫–∞–∑**: –ø–µ—Ä–µ–∫–∞–∑, –ø–µ—Ä–µ–≤–æ–¥, –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä

### üìã –ü–∞—Ä—Å–∏–Ω–≥ —É—Ç–æ—á–Ω–µ–Ω—å
- **–†–æ–∑–º—ñ—Ä–∏ –∑ –∫–æ–¥–æ–º —Ç–æ–≤–∞—Ä—É**: `–§2181 (38); –§2080 (41);`
- **–ü—Ä–æ—Å—Ç–æ —Ä–æ–∑–º—ñ—Ä–∏**: `38 —Ä–æ–∑–º—ñ—Ä`, `39 eu`
- **–ó–∞–º—ñ—Ä–∏**: `27.5 —Å–º`, `–∑–∞–º—ñ—Ä 28`
- **–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ**: –±—É–¥—å-—è–∫–∏–π —ñ–Ω—à–∏–π —Ç–µ–∫—Å—Ç

### üë• –î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
- –ü–æ—à—É–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π)
- –ü–æ—à—É–∫ –ø–æ Facebook (–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π URL)
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –ø–æ—Ä–æ–∂–Ω—ñ—Ö –ø–æ–ª—ñ–≤
- –ö–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ

### üí∞ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ü—ñ–Ω
- –û—Å—Ç–∞–Ω–Ω—è —Ü—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É ‚Üí –ø–æ—Ç–æ—á–Ω–∞ —Ü—ñ–Ω–∞ —Ç–æ–≤–∞—Ä—É
- –°—Ç–∞—Ä–∞ —Ü—ñ–Ω–∞ ‚Üí –ø–æ–ª–µ `oldprice`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—ñ–≤ (—Ç—ñ–ª—å–∫–∏ –ø–æ—Ä–æ–∂–Ω—ñ—Ö)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–º—ñ—Ä—ñ–≤ (—Ç—ñ–ª—å–∫–∏ –ø–æ—Ä–æ–∂–Ω—ñ—Ö)

## –§–∞–π–ª–∏

- `orders_comprehensive_parser.py` - –æ—Å–Ω–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç
- `test_orders_parser.py` - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç
- `README_ORDERS_PARSER.md` - —Ü—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ë–∞–∑–æ–≤–∏–π –∑–∞–ø—É—Å–∫ (–≤—Å—ñ –∞—Ä–∫—É—à—ñ)
```bash
cd backend/scripts
python orders_comprehensive_parser.py
```

### 2. –¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø—É—Å–∫ (–ø–µ—Ä—à—ñ 5 –∞—Ä–∫—É—à—ñ–≤)
```bash
python orders_comprehensive_parser.py --test 5
```

### 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤
```bash
python test_orders_parser.py
```

### 4. –ß–µ—Ä–µ–∑ API (–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É)
```http
POST /parsing/orders-comprehensive
Content-Type: application/json

{
    "max_sheets": 10  // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
}
```

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è (.env)
```env
GOOGLE_SHEETS_DOCUMENT_NAME_ORDERS="–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è"
GOOGLE_SHEETS_JSON_KEY="secure_creds/service_account.json"
```

### –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏
- `backend/scripts/secure_creds/service_account.json` - Google API –∫–ª—é—á—ñ

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–°–∫—Ä–∏–ø—Ç –≤–∏–≤–æ–¥–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–±—Ä–æ–±–ª–µ–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤
- –£—Å–ø—ñ—à–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –ü–æ–º–∏–ª–∫–∏
- –í—ñ–¥—Å—É—Ç–Ω—ñ —Ç–æ–≤–∞—Ä–∏
- –°—Ç–≤–æ—Ä–µ–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∏
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ (—Ü—ñ–Ω–∏, —Ä–æ–∑–º—ñ—Ä–∏, –∑–∞–º—ñ—Ä–∏)

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É
```
üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–ê–†–°–ò–ù–ì–£:
  –í—Å—å–æ–≥–æ —Ä—è–¥–∫—ñ–≤ –æ–±—Ä–æ–±–ª–µ–Ω–æ: 50000
  –£—Å–ø—ñ—à–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å: 48500
  –ü–æ–º–∏–ª–æ–∫: 300
  –í—ñ–¥—Å—É—Ç–Ω—ñ—Ö —Ç–æ–≤–∞—Ä—ñ–≤: 1200
  –ó–∞–º–æ–≤–ª–µ–Ω—å –∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏: 850
  –ö–ª—ñ—î–Ω—Ç—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ: 15000
  –ö–ª—ñ—î–Ω—Ç—ñ–≤ –æ–Ω–æ–≤–ª–µ–Ω–æ: 5000
  –¢–æ–≤–∞—Ä—ñ–≤ –∑ –æ–Ω–æ–≤–ª–µ–Ω–∏–º–∏ —Ü—ñ–Ω–∞–º–∏: 3500
  –¢–æ–≤–∞—Ä—ñ–≤ –∑ –æ–Ω–æ–≤–ª–µ–Ω–∏–º–∏ —Ä–æ–∑–º—ñ—Ä–∞–º–∏: 1200
  –¢–æ–≤–∞—Ä—ñ–≤ –∑ –æ–Ω–æ–≤–ª–µ–Ω–∏–º–∏ –∑–∞–º—ñ—Ä–∞–º–∏: 800
  –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å: 97.0%
```

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º workflow

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ó–∞–º—ñ–Ω–∞ —ñ—Å–Ω—É—é—á–æ–≥–æ orders_pars.py
–£ —Ñ–∞–π–ª—ñ `googlesheets_pars.py` –∑–∞–º—ñ–Ω–∏—Ç–∏ –≤–∏–∫–ª–∏–∫:
```python
# –ó–∞–º—ñ—Å—Ç—å:
import orders_pars
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏:
from orders_comprehensive_parser import OrdersComprehensiveParser
parser = OrdersComprehensiveParser()
await parser.parse_all_orders()
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –û–∫—Ä–µ–º–∏–π –∑–∞–ø—É—Å–∫
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –æ–∫—Ä–µ–º–∏–π —Å–∫—Ä–∏–ø—Ç –ø—ñ—Å–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥—É —Ç–æ–≤–∞—Ä—ñ–≤.

### –í–∞—Ä—ñ–∞–Ω—Ç 3: API –µ–Ω–¥–ø–æ—ñ–Ω—Ç
–ó–∞–ø—É—Å–∫–∞—Ç–∏ —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é API.

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

- **–û—Å–Ω–æ–≤–Ω–∏–π –ª–æ–≥**: `orders_comprehensive_parser.log`
- **–†—ñ–≤–µ–Ω—å**: INFO
- **–ö–æ–¥—É–≤–∞–Ω–Ω—è**: UTF-8
- **–õ–æ–∫–∞—Ü—ñ—è**: `backend/scripts/`

## –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### –í—ñ–¥—Å—É—Ç–Ω—ñ —Ç–æ–≤–∞—Ä–∏
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö —Ç–æ–≤–∞—Ä—ñ–≤
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä–µ–º –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ —Ç–æ–≤–∞—Ä–∏
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤

### –ü–æ–º–∏–ª–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥—É
- –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- –ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–º–∏–ª–æ–∫

### –ü–æ–º–∏–ª–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è —Å–ø—Ä–æ–±
- –î–µ—Ç–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
- Graceful shutdown –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–∫–∞—Ö

## –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: 85-105 —Ö–≤–∏–ª–∏–Ω –¥–ª—è –≤—Å—ñ—Ö –∞—Ä–∫—É—à—ñ–≤
- **–û–±—Ä–æ–±–∫–∞**: ~500-800 —Ä—è–¥–∫—ñ–≤/—Ö–≤–∏–ª–∏–Ω—É
- **–ü–∞–º'—è—Ç—å**: –∫–µ—à—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- **–ö–æ–º—ñ—Ç–∏**: –∫–æ–∂–Ω—ñ 10 –∞—Ä–∫—É—à—ñ–≤ –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ

## –ë–µ–∑–ø–µ–∫–∞

- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π
- Rollback –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–∫–∞—Ö
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å `test_orders_parser.py` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
- ‚úÖ –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —É—Ç–æ—á–Ω–µ–Ω—å 
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –∫–æ–¥—ñ–≤ —Ç–æ–≤–∞—Ä—ñ–≤
- ‚úÖ –ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Google Sheets
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö 