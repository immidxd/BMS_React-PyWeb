# –ü–õ–ê–ù –Ü–ù–¢–ï–ì–†–ê–¶–Ü–á –ü–ê–†–°–ò–ù–ì–£ –ó–ê–ú–û–í–õ–ï–ù–¨

## üîß –ü–æ—Ç–æ—á–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –Ü—Å–Ω—É—é—á–∏–π workflow:
1. **`googlesheets_pars.py`** - –ø–∞—Ä—Å–∏—Ç—å —Ç–æ–≤–∞—Ä–∏ –∑ –¥–æ–∫—É–º–µ–Ω—Ç—É "–ñ—É—Ä–Ω–∞–ª"
2. **–í –∫—ñ–Ω—Ü—ñ –∑–∞–ø—É—Å–∫–∞—î `orders_pars.py`** (—Å—Ç–∞—Ä–∏–π —Å–∫—Ä–∏–ø—Ç –∑–∞–º–æ–≤–ª–µ–Ω—å)

### –ù–æ–≤–∏–π workflow:
1. **`googlesheets_pars.py`** - –ø–∞—Ä—Å–∏—Ç—å —Ç–æ–≤–∞—Ä–∏ (–±–µ–∑ –∑–º—ñ–Ω)
2. **`orders_comprehensive_parser.py`** - –Ω–æ–≤–∏–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø–∞—Ä—Å–µ—Ä –∑–∞–º–æ–≤–ª–µ–Ω—å

## üöÄ –í–∞—Ä—ñ–∞–Ω—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ó–∞–º—ñ–Ω–∞ —ñ—Å–Ω—É—é—á–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–ò–ô)

**–ú–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ `googlesheets_pars.py`:**
```python
# –ó–∞–º—ñ—Å—Ç—å:
script_path_orders = os.path.join(SCRIPT_DIR, 'orders_pars.py')

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
script_path_orders = os.path.join(SCRIPT_DIR, 'orders_comprehensive_parser.py')
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ –≤ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É —Ç–æ–≤–∞—Ä—ñ–≤
- –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∞

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –î–æ–¥–∞–≤–∞–Ω–Ω—è –∞—Ä–≥—É–º–µ–Ω—Ç—É –≤–∏–±–æ—Ä—É

**–î–æ–¥–∞—Ç–∏ –æ–ø—Ü—ñ—é –≤ `googlesheets_pars.py`:**
```python
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--orders-parser', choices=['old', 'comprehensive'], 
                   default='comprehensive', help='–í–∏–±—ñ—Ä –ø–∞—Ä—Å–µ—Ä–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å')
args = parser.parse_args()

if args.orders_parser == 'comprehensive':
    script_path = 'orders_comprehensive_parser.py'
else:
    script_path = 'orders_pars.py'
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –û–∫—Ä–µ–º–∏–π API –µ–Ω–¥–ø–æ—ñ–Ω—Ç

**–î–æ–¥–∞—Ç–∏ –≤ API (`routers/parsing.py`):**
```python
@router.post("/parse-orders-comprehensive")
async def parse_orders_comprehensive(max_sheets: Optional[int] = None):
    """–ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥—É –∑–∞–º–æ–≤–ª–µ–Ω—å"""
    # –õ–æ–≥—ñ–∫–∞ –∑–∞–ø—É—Å–∫—É –ø–∞—Ä—Å–µ—Ä–∞
```

## üìã –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –§–∞–∑–∞ 1: –ü—Ä—è–º–∞ –∑–∞–º—ñ–Ω–∞ (–®–í–ò–î–ö–û)
–ü—Ä–æ—Å—Ç–æ –∑–∞–º—ñ–Ω–∏—Ç–∏ –≤–∏–∫–ª–∏–∫ —Å—Ç–∞—Ä–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ –Ω–æ–≤–∏–π —É `googlesheets_pars.py`

### –§–∞–∑–∞ 2: –î–æ–¥–∞–Ω–Ω—è –≤ API (–ì–ù–£–ß–ö–Ü–°–¢–¨)
–°—Ç–≤–æ—Ä–∏—Ç–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç –¥–ª—è –Ω–µ–∑–∞–ª–µ–∂–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É

### –§–∞–∑–∞ 3: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ UI (–ó–†–£–ß–ù–Ü–°–¢–¨)
–î–æ–¥–∞—Ç–∏ –∫–Ω–æ–ø–∫—É –≤ React —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## ‚ö° –ì–æ—Ç–æ–≤–∏–π –∫–æ–¥ –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### 1. –ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è `googlesheets_pars.py`
```python
# –î–æ–¥–∞—Ç–∏ –∞—Ä–≥—É–º–µ–Ω—Ç
def import_data(use_comprehensive_orders=True):
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ ...
    
    if use_comprehensive_orders:
        logger.info("–ó–∞–ø—É—Å–∫–∞—î–º–æ orders_comprehensive_parser.py...")
        script_path_orders = os.path.join(SCRIPT_DIR, 'orders_comprehensive_parser.py')
    else:
        logger.info("–ó–∞–ø—É—Å–∫–∞—î–º–æ orders_pars.py...")
        script_path_orders = os.path.join(SCRIPT_DIR, 'orders_pars.py')
```

### 2. –ù–æ–≤–∏–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç API
```python
@router.post("/orders/comprehensive-parse")
async def comprehensive_orders_parse(
    max_sheets: Optional[int] = None,
    background_tasks: BackgroundTasks = BackgroundTasks()
):
    """–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–º–æ–≤–ª–µ–Ω—å –∑ Google Sheets"""
    
    def run_comprehensive_parser():
        parser = OrdersComprehensiveParser()
        asyncio.run(parser.parse_all_orders(max_sheets=max_sheets))
    
    background_tasks.add_task(run_comprehensive_parser)
    
    return {
        "message": "–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–º–æ–≤–ª–µ–Ω—å –∑–∞–ø—É—â–µ–Ω–æ",
        "max_sheets": max_sheets or "–≤—Å—ñ"
    }
```

### 3. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```tsx
const OrdersParsingButton = () => {
  const [loading, setLoading] = useState(false);
  
  const handleParse = async () => {
    setLoading(true);
    try {
      await api.post('/parsing/orders/comprehensive-parse');
      toast.success('–ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–º–æ–≤–ª–µ–Ω—å –∑–∞–ø—É—â–µ–Ω–æ!');
    } catch (error) {
      toast.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–ø—É—Å–∫—É –ø–∞—Ä—Å–∏–Ω–≥—É');
    } finally {
      setLoading(false);
    }
  };

  return (
    <button onClick={handleParse} disabled={loading}>
      {loading ? '–ü–∞—Ä—Å–∏–Ω–≥...' : '–ü–∞—Ä—Å–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è'}
    </button>
  );
};
```

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

### ‚úÖ –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:
- **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ** - –∫–æ–∂–µ–Ω —Å–∫—Ä–∏–ø—Ç –º–∞—î —á—ñ—Ç–∫—É —Ñ—É–Ω–∫—Ü—ñ—é
- **–õ–µ–≥–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –º–æ–∂–Ω–∞ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ
- **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### ‚úÖ –ë—ñ–∑–Ω–µ—Å –ø–µ—Ä–µ–≤–∞–≥–∏:
- **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö** - –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è –∫–ª—ñ—î–Ω—Ç—ñ–≤, —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏
- **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ü—ñ–Ω** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ–Ω —Ç–æ–≤–∞—Ä—ñ–≤
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ** - –Ω–µ –ø—Å—É—î —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ
- **–î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

## üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π –ø–ª–∞–Ω

### –î–µ–Ω—å 1: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–∞—Ä—Å–µ—Ä –∑ `--test 5` –Ω–∞ –Ω–µ–≤–µ–ª–∏–∫—ñ–π –≤–∏–±—ñ—Ä—Ü—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –î–µ–Ω—å 2: –ü–æ—Å—Ç—É–ø–æ–≤–∏–π –∑–∞–ø—É—Å–∫  
- –ó–∞–º—ñ–Ω–∏—Ç–∏ –≤–∏–∫–ª–∏–∫ –≤ `googlesheets_pars.py`
- –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ø–∞—Ä—Å–∏–Ω–≥—É

### –î–µ–Ω—å 3: API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- –î–æ–¥–∞—Ç–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç –≤ API
- –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤ React UI

### –î–µ–Ω—å 4+: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞ –ø–æ—Ç—Ä–µ–±–æ—é

---
**–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û –î–û –í–ü–†–û–í–ê–î–ñ–ï–ù–ù–Ø** 