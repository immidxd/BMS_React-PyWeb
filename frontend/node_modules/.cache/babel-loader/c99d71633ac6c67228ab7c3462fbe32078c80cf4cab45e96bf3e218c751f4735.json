{"ast":null,"code":"import React,{useState}from'react';import{useQuery}from'@tanstack/react-query';import styled from'styled-components';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faSearch}from'@fortawesome/free-solid-svg-icons';import{fetchOrders}from'../services/orderService';import{fetchOrderStatuses,fetchPaymentStatuses,fetchDeliveryMethods}from'../services/referenceService';import{useTheme}from'../contexts/ThemeContext';import{useSearch,useFilter}from'../App';import OrdersTable from'../components/orders/OrdersTable';import Pagination from'../components/common/Pagination';import LoadingSpinner from'../components/common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TabContainer=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n`;const Header=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;const Title=styled.h1`\n  font-size: 24px;\n  margin: 0;\n`;const SearchContainer=styled.div`\n  position: relative;\n  flex: 1;\n  max-width: 500px;\n  margin: 0 20px;\n`;const SearchInput=styled.input`\n  width: 100%;\n  padding: 10px 15px 10px 40px;\n  border-radius: 4px;\n  border: 1px solid ${props=>props.theme.inputBorder};\n  background-color: ${props=>props.theme.inputBackground};\n  color: ${props=>props.theme.text};\n  transition: border-color 0.2s;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n    border-color: ${props=>props.theme.primary};\n  }\n`;const SearchIcon=styled.div`\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #888;\n`;const MainContentArea=styled.div`\n  width: 100%;\n`;const OrdersCount=styled.div`\n  margin-top: 20px;\n  font-size: 14px;\n  color: ${props=>props.theme.text};\n  opacity: 0.7;\n`;const OrdersTab=()=>{const{darkTheme}=useTheme();const{searchTerm,setSearchTerm}=useSearch();const{sidebarOpen}=useFilter();const[page,setPage]=useState(1);const[filters,setFilters]=useState({});// Fetch reference data for filters\nconst{data:orderStatuses,isLoading:isLoadingOrderStatuses}=useQuery({queryKey:['orderStatuses'],queryFn:fetchOrderStatuses});const{data:paymentStatuses,isLoading:isLoadingPaymentStatuses}=useQuery({queryKey:['paymentStatuses'],queryFn:fetchPaymentStatuses});const{data:deliveryMethods,isLoading:isLoadingDeliveryMethods}=useQuery({queryKey:['deliveryMethods'],queryFn:fetchDeliveryMethods});// Fetch orders based on current filters and pagination\nconst{data:ordersData,isLoading:isLoadingOrders}=useQuery({queryKey:['orders',page,filters,searchTerm],queryFn:()=>fetchOrders(page,20,{...filters,search:searchTerm}),keepPreviousData:true});// Handle page change\nconst handlePageChange=newPage=>{setPage(newPage);};// Handle search input change\nconst handleSearchChange=e=>{setSearchTerm(e.target.value);};// Loading state for reference data\nif(isLoadingOrderStatuses||isLoadingPaymentStatuses||isLoadingDeliveryMethods){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(TabContainer,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(Title,{children:\"Orders\"}),/*#__PURE__*/_jsxs(SearchContainer,{children:[/*#__PURE__*/_jsx(SearchIcon,{children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch})}),/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"Search orders...\",value:searchTerm||'',onChange:handleSearchChange})]})]}),/*#__PURE__*/_jsx(MainContentArea,{children:isLoadingOrders?/*#__PURE__*/_jsx(LoadingSpinner,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OrdersTable,{orders:(ordersData===null||ordersData===void 0?void 0:ordersData.items)||[],orderStatuses:(orderStatuses===null||orderStatuses===void 0?void 0:orderStatuses.items)||[],paymentStatuses:(paymentStatuses===null||paymentStatuses===void 0?void 0:paymentStatuses.items)||[],deliveryMethods:(deliveryMethods===null||deliveryMethods===void 0?void 0:deliveryMethods.items)||[]}),ordersData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Pagination,{currentPage:page,totalPages:ordersData.pages,onPageChange:handlePageChange}),/*#__PURE__*/_jsxs(OrdersCount,{children:[\"Showing \",ordersData.items.length,\" of \",ordersData.total,\" orders\"]})]})]})})]});};export default OrdersTab;","map":{"version":3,"names":["React","useState","useQuery","styled","FontAwesomeIcon","faSearch","fetchOrders","fetchOrderStatuses","fetchPaymentStatuses","fetchDeliveryMethods","useTheme","useSearch","useFilter","OrdersTable","Pagination","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TabContainer","div","Header","Title","h1","SearchContainer","SearchInput","input","props","theme","inputBorder","inputBackground","text","primary","SearchIcon","MainContentArea","OrdersCount","OrdersTab","darkTheme","searchTerm","setSearchTerm","sidebarOpen","page","setPage","filters","setFilters","data","orderStatuses","isLoading","isLoadingOrderStatuses","queryKey","queryFn","paymentStatuses","isLoadingPaymentStatuses","deliveryMethods","isLoadingDeliveryMethods","ordersData","isLoadingOrders","search","keepPreviousData","handlePageChange","newPage","handleSearchChange","e","target","value","children","icon","type","placeholder","onChange","orders","items","currentPage","totalPages","pages","onPageChange","length","total"],"sources":["/Users/i.malashenko/Desktop/project копія/react-fastapi-app/frontend/src/pages/OrdersTab.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport styled from 'styled-components';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\nimport { fetchOrders, OrderFilters } from '../services/orderService';\nimport { fetchOrderStatuses, fetchPaymentStatuses, fetchDeliveryMethods } from '../services/referenceService';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { useSearch, useFilter } from '../App';\nimport OrdersTable from '../components/orders/OrdersTable';\nimport Pagination from '../components/common/Pagination';\nimport LoadingSpinner from '../components/common/LoadingSpinner';\n\nconst TabContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n  margin: 0;\n`;\n\nconst SearchContainer = styled.div`\n  position: relative;\n  flex: 1;\n  max-width: 500px;\n  margin: 0 20px;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 10px 15px 10px 40px;\n  border-radius: 4px;\n  border: 1px solid ${props => props.theme.inputBorder};\n  background-color: ${props => props.theme.inputBackground};\n  color: ${props => props.theme.text};\n  transition: border-color 0.2s;\n  font-size: 16px;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.theme.primary};\n  }\n`;\n\nconst SearchIcon = styled.div`\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #888;\n`;\n\nconst MainContentArea = styled.div`\n  width: 100%;\n`;\n\nconst OrdersCount = styled.div`\n  margin-top: 20px;\n  font-size: 14px;\n  color: ${props => props.theme.text};\n  opacity: 0.7;\n`;\n\nconst OrdersTab: React.FC = () => {\n  const { darkTheme } = useTheme();\n  const { searchTerm, setSearchTerm } = useSearch();\n  const { sidebarOpen } = useFilter();\n  const [page, setPage] = useState(1);\n  const [filters, setFilters] = useState<OrderFilters>({});\n  \n  // Fetch reference data for filters\n  const { data: orderStatuses, isLoading: isLoadingOrderStatuses } = useQuery({\n    queryKey: ['orderStatuses'],\n    queryFn: fetchOrderStatuses,\n  });\n  \n  const { data: paymentStatuses, isLoading: isLoadingPaymentStatuses } = useQuery({\n    queryKey: ['paymentStatuses'],\n    queryFn: fetchPaymentStatuses,\n  });\n  \n  const { data: deliveryMethods, isLoading: isLoadingDeliveryMethods } = useQuery({\n    queryKey: ['deliveryMethods'],\n    queryFn: fetchDeliveryMethods,\n  });\n\n  // Fetch orders based on current filters and pagination\n  const { data: ordersData, isLoading: isLoadingOrders } = useQuery({\n    queryKey: ['orders', page, filters, searchTerm],\n    queryFn: () => fetchOrders(page, 20, { ...filters, search: searchTerm }),\n    keepPreviousData: true,\n  });\n\n  // Handle page change\n  const handlePageChange = (newPage: number) => {\n    setPage(newPage);\n  };\n\n  // Handle search input change\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchTerm(e.target.value);\n  };\n\n  // Loading state for reference data\n  if (isLoadingOrderStatuses || isLoadingPaymentStatuses || isLoadingDeliveryMethods) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <TabContainer>\n      <Header>\n        <Title>Orders</Title>\n        <SearchContainer>\n          <SearchIcon>\n            <FontAwesomeIcon icon={faSearch} />\n          </SearchIcon>\n          <SearchInput\n            type=\"text\"\n            placeholder=\"Search orders...\"\n            value={searchTerm || ''}\n            onChange={handleSearchChange}\n          />\n        </SearchContainer>\n      </Header>\n\n      <MainContentArea>\n        {isLoadingOrders ? (\n          <LoadingSpinner />\n        ) : (\n          <>\n            <OrdersTable \n              orders={ordersData?.items || []} \n              orderStatuses={orderStatuses?.items || []}\n              paymentStatuses={paymentStatuses?.items || []}\n              deliveryMethods={deliveryMethods?.items || []}\n            />\n            \n            {ordersData && (\n              <>\n                <Pagination\n                  currentPage={page}\n                  totalPages={ordersData.pages}\n                  onPageChange={handlePageChange}\n                />\n                <OrdersCount>\n                  Showing {ordersData.items.length} of {ordersData.total} orders\n                </OrdersCount>\n              </>\n            )}\n          </>\n        )}\n      </MainContentArea>\n    </TabContainer>\n  );\n};\n\nexport default OrdersTab; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}