{"ast":null,"code":"import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import{BrowserRouter}from'react-router-dom';import{QueryClient,QueryClientProvider}from'@tanstack/react-query';import{ReactQueryDevtools}from'@tanstack/react-query-devtools';import{ToastContainer}from'react-toastify';import axios from'axios';import App from'./App';import{ThemeProvider}from'./contexts/ThemeContext';import'./index.css';import'react-toastify/dist/ReactToastify.css';// Setup axios defaults\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.baseURL=process.env.REACT_APP_API_URL||'http://localhost:8000';// Create a client\nconst queryClient=new QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:false,retry:1,staleTime:30000}}});// Error boundary component to catch React errors\nclass ErrorBoundary extends React.Component{constructor(props){super(props);this.state={hasError:false,error:null};}static getDerivedStateFromError(error){return{hasError:true,error};}componentDidCatch(error,errorInfo){console.error(\"React error caught:\",error,errorInfo);}render(){if(this.state.hasError){var _this$state$error;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',color:'red',backgroundColor:'#ffeeee',margin:'20px',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Something went wrong.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",(_this$state$error=this.state.error)===null||_this$state$error===void 0?void 0:_this$state$error.toString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),children:\"Reload page\"})]});}return this.props.children;}}// Loading indicator component\nconst LoadingApp=()=>{const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// Check backend connection\nconst checkBackend=async()=>{try{console.log(\"Checking backend connection...\");const response=await axios.get('/api/health');console.log(\"Backend response:\",response.data);setLoading(false);}catch(err){console.error(\"Backend connection error:\",err);setError(\"Could not connect to backend API. Please check if the server is running.\");}};checkBackend();// Timeout to show loading state\nconst timeout=setTimeout(()=>{if(loading&&!error){setLoading(false);}},5000);return()=>clearTimeout(timeout);},[loading,error]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"div\",{style:{border:'4px solid rgba(0, 0, 0, 0.1)',width:'36px',height:'36px',borderRadius:'50%',borderLeftColor:'#09f',animation:'spin 1s linear infinite'}}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading application...\"}),/*#__PURE__*/_jsx(\"style\",{children:`\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',color:'red',backgroundColor:'#ffeeee',margin:'20px',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Connection Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),children:\"Retry\"})]});}return null;};// Log environment info\nconsole.log(\"App environment:\",{nodeEnv:process.env.NODE_ENV,apiUrl:process.env.REACT_APP_API_URL||'http://localhost:8000',debug:process.env.REACT_APP_DEBUG});const root=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(QueryClientProvider,{client:queryClient,children:/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(React.Suspense,{fallback:/*#__PURE__*/_jsx(LoadingApp,{}),children:[/*#__PURE__*/_jsx(App,{}),/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-right\"}),process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsx(ReactQueryDevtools,{})]})})})})})}));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","BrowserRouter","QueryClient","QueryClientProvider","ReactQueryDevtools","ToastContainer","axios","App","ThemeProvider","jsx","_jsx","jsxs","_jsxs","defaults","baseURL","process","env","REACT_APP_API_URL","queryClient","defaultOptions","queries","refetchOnWindowFocus","retry","staleTime","ErrorBoundary","Component","constructor","props","state","hasError","error","getDerivedStateFromError","componentDidCatch","errorInfo","console","render","_this$state$error","style","padding","color","backgroundColor","margin","borderRadius","children","toString","onClick","window","location","reload","LoadingApp","loading","setLoading","setError","checkBackend","log","response","get","data","err","timeout","setTimeout","clearTimeout","display","justifyContent","alignItems","height","flexDirection","border","width","borderLeftColor","animation","nodeEnv","NODE_ENV","apiUrl","debug","REACT_APP_DEBUG","root","createRoot","document","getElementById","StrictMode","client","Suspense","fallback","position"],"sources":["/Users/i.malashenko/Desktop/project копія/react-fastapi-app/frontend/src/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { ToastContainer } from 'react-toastify';\nimport axios from 'axios';\nimport App from './App';\nimport { ThemeProvider } from './contexts/ThemeContext';\nimport './index.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\n// Setup axios defaults\naxios.defaults.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false,\n      retry: 1,\n      staleTime: 30000,\n    },\n  },\n});\n\n// Error boundary component to catch React errors\nclass ErrorBoundary extends React.Component<{children: React.ReactNode}, {hasError: boolean, error: any}> {\n  constructor(props: {children: React.ReactNode}) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: any) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    console.error(\"React error caught:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div style={{ padding: '20px', color: 'red', backgroundColor: '#ffeeee', margin: '20px', borderRadius: '5px' }}>\n          <h2>Something went wrong.</h2>\n          <p>Error: {this.state.error?.toString()}</p>\n          <button onClick={() => window.location.reload()}>Reload page</button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Loading indicator component\nconst LoadingApp = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Check backend connection\n    const checkBackend = async () => {\n      try {\n        console.log(\"Checking backend connection...\");\n        const response = await axios.get('/api/health');\n        console.log(\"Backend response:\", response.data);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Backend connection error:\", err);\n        setError(\"Could not connect to backend API. Please check if the server is running.\");\n      }\n    };\n\n    checkBackend();\n\n    // Timeout to show loading state\n    const timeout = setTimeout(() => {\n      if (loading && !error) {\n        setLoading(false);\n      }\n    }, 5000);\n\n    return () => clearTimeout(timeout);\n  }, [loading, error]);\n\n  if (loading) {\n    return (\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', flexDirection: 'column' }}>\n        <div style={{ border: '4px solid rgba(0, 0, 0, 0.1)', width: '36px', height: '36px', borderRadius: '50%', borderLeftColor: '#09f', animation: 'spin 1s linear infinite' }}></div>\n        <p>Loading application...</p>\n        <style>{`\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `}</style>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ padding: '20px', color: 'red', backgroundColor: '#ffeeee', margin: '20px', borderRadius: '5px' }}>\n        <h2>Connection Error</h2>\n        <p>{error}</p>\n        <button onClick={() => window.location.reload()}>Retry</button>\n      </div>\n    );\n  }\n\n  return null;\n}\n\n// Log environment info\nconsole.log(\"App environment:\", {\n  nodeEnv: process.env.NODE_ENV,\n  apiUrl: process.env.REACT_APP_API_URL || 'http://localhost:8000',\n  debug: process.env.REACT_APP_DEBUG,\n});\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <QueryClientProvider client={queryClient}>\n        <ThemeProvider>\n          <BrowserRouter>\n            <React.Suspense fallback={<LoadingApp />}>\n              <App />\n              <ToastContainer position=\"bottom-right\" />\n              {process.env.NODE_ENV === 'development' && <ReactQueryDevtools />}\n            </React.Suspense>\n          </BrowserRouter>\n        </ThemeProvider>\n      </QueryClientProvider>\n    </ErrorBoundary>\n  </React.StrictMode>\n); "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,OAASC,aAAa,KAAQ,kBAAkB,CAChD,OAASC,WAAW,CAAEC,mBAAmB,KAAQ,uBAAuB,CACxE,OAASC,kBAAkB,KAAQ,gCAAgC,CACnE,OAASC,cAAc,KAAQ,gBAAgB,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,GAAG,KAAM,OAAO,CACvB,OAASC,aAAa,KAAQ,yBAAyB,CACvD,MAAO,aAAa,CACpB,MAAO,uCAAuC,CAE9C;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACAN,KAAK,CAACO,QAAQ,CAACC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAEjF;AACA,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAhB,WAAW,CAAC,CAClCiB,cAAc,CAAE,CACdC,OAAO,CAAE,CACPC,oBAAoB,CAAE,KAAK,CAC3BC,KAAK,CAAE,CAAC,CACRC,SAAS,CAAE,KACb,CACF,CACF,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,aAAa,QAAS,CAAA3B,KAAK,CAAC4B,SAAwE,CACxGC,WAAWA,CAACC,KAAkC,CAAE,CAC9C,KAAK,CAACA,KAAK,CAAC,CACZ,IAAI,CAACC,KAAK,CAAG,CAAEC,QAAQ,CAAE,KAAK,CAAEC,KAAK,CAAE,IAAK,CAAC,CAC/C,CAEA,MAAO,CAAAC,wBAAwBA,CAACD,KAAU,CAAE,CAC1C,MAAO,CAAED,QAAQ,CAAE,IAAI,CAAEC,KAAM,CAAC,CAClC,CAEAE,iBAAiBA,CAACF,KAAU,CAAEG,SAAc,CAAE,CAC5CC,OAAO,CAACJ,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAEG,SAAS,CAAC,CACxD,CAEAE,MAAMA,CAAA,CAAG,CACP,GAAI,IAAI,CAACP,KAAK,CAACC,QAAQ,CAAE,KAAAO,iBAAA,CACvB,mBACExB,KAAA,QAAKyB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,KAAK,CAAE,KAAK,CAAEC,eAAe,CAAE,SAAS,CAAEC,MAAM,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAC,QAAA,eAC7GjC,IAAA,OAAAiC,QAAA,CAAI,uBAAqB,CAAI,CAAC,cAC9B/B,KAAA,MAAA+B,QAAA,EAAG,SAAO,EAAAP,iBAAA,CAAC,IAAI,CAACR,KAAK,CAACE,KAAK,UAAAM,iBAAA,iBAAhBA,iBAAA,CAAkBQ,QAAQ,CAAC,CAAC,EAAI,CAAC,cAC5ClC,IAAA,WAAQmC,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAE,CAAAL,QAAA,CAAC,aAAW,CAAQ,CAAC,EAClE,CAAC,CAEV,CAEA,MAAO,KAAI,CAAChB,KAAK,CAACgB,QAAQ,CAC5B,CACF,CAEA;AACA,KAAM,CAAAM,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgC,KAAK,CAAEsB,QAAQ,CAAC,CAAGtD,QAAQ,CAAgB,IAAI,CAAC,CAEvDC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAsD,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACFnB,OAAO,CAACoB,GAAG,CAAC,gCAAgC,CAAC,CAC7C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAjD,KAAK,CAACkD,GAAG,CAAC,aAAa,CAAC,CAC/CtB,OAAO,CAACoB,GAAG,CAAC,mBAAmB,CAAEC,QAAQ,CAACE,IAAI,CAAC,CAC/CN,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOO,GAAG,CAAE,CACZxB,OAAO,CAACJ,KAAK,CAAC,2BAA2B,CAAE4B,GAAG,CAAC,CAC/CN,QAAQ,CAAC,0EAA0E,CAAC,CACtF,CACF,CAAC,CAEDC,YAAY,CAAC,CAAC,CAEd;AACA,KAAM,CAAAM,OAAO,CAAGC,UAAU,CAAC,IAAM,CAC/B,GAAIV,OAAO,EAAI,CAACpB,KAAK,CAAE,CACrBqB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMU,YAAY,CAACF,OAAO,CAAC,CACpC,CAAC,CAAE,CAACT,OAAO,CAAEpB,KAAK,CAAC,CAAC,CAEpB,GAAIoB,OAAO,CAAE,CACX,mBACEtC,KAAA,QAAKyB,KAAK,CAAE,CAAEyB,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEC,MAAM,CAAE,OAAO,CAAEC,aAAa,CAAE,QAAS,CAAE,CAAAvB,QAAA,eACxHjC,IAAA,QAAK2B,KAAK,CAAE,CAAE8B,MAAM,CAAE,8BAA8B,CAAEC,KAAK,CAAE,MAAM,CAAEH,MAAM,CAAE,MAAM,CAAEvB,YAAY,CAAE,KAAK,CAAE2B,eAAe,CAAE,MAAM,CAAEC,SAAS,CAAE,yBAA0B,CAAE,CAAM,CAAC,cACjL5D,IAAA,MAAAiC,QAAA,CAAG,wBAAsB,CAAG,CAAC,cAC7BjC,IAAA,UAAAiC,QAAA,CAAQ;AAChB;AACA;AACA;AACA;AACA,SAAS,CAAQ,CAAC,EACP,CAAC,CAEV,CAEA,GAAIb,KAAK,CAAE,CACT,mBACElB,KAAA,QAAKyB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,KAAK,CAAE,KAAK,CAAEC,eAAe,CAAE,SAAS,CAAEC,MAAM,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAC,QAAA,eAC7GjC,IAAA,OAAAiC,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBjC,IAAA,MAAAiC,QAAA,CAAIb,KAAK,CAAI,CAAC,cACdpB,IAAA,WAAQmC,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAE,CAAAL,QAAA,CAAC,OAAK,CAAQ,CAAC,EAC5D,CAAC,CAEV,CAEA,MAAO,KAAI,CACb,CAAC,CAED;AACAT,OAAO,CAACoB,GAAG,CAAC,kBAAkB,CAAE,CAC9BiB,OAAO,CAAExD,OAAO,CAACC,GAAG,CAACwD,QAAQ,CAC7BC,MAAM,CAAE1D,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAChEyD,KAAK,CAAE3D,OAAO,CAACC,GAAG,CAAC2D,eACrB,CAAC,CAAC,CAEF,KAAM,CAAAC,IAAI,CAAG5E,QAAQ,CAAC6E,UAAU,CAC9BC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAChC,CAAC,CAEDH,IAAI,CAACzC,MAAM,cACTzB,IAAA,CAACb,KAAK,CAACmF,UAAU,EAAArC,QAAA,cACfjC,IAAA,CAACc,aAAa,EAAAmB,QAAA,cACZjC,IAAA,CAACP,mBAAmB,EAAC8E,MAAM,CAAE/D,WAAY,CAAAyB,QAAA,cACvCjC,IAAA,CAACF,aAAa,EAAAmC,QAAA,cACZjC,IAAA,CAACT,aAAa,EAAA0C,QAAA,cACZ/B,KAAA,CAACf,KAAK,CAACqF,QAAQ,EAACC,QAAQ,cAAEzE,IAAA,CAACuC,UAAU,GAAE,CAAE,CAAAN,QAAA,eACvCjC,IAAA,CAACH,GAAG,GAAE,CAAC,cACPG,IAAA,CAACL,cAAc,EAAC+E,QAAQ,CAAC,cAAc,CAAE,CAAC,CACzCrE,OAAO,CAACC,GAAG,CAACwD,QAAQ,GAAK,aAAa,eAAI9D,IAAA,CAACN,kBAAkB,GAAE,CAAC,EACnD,CAAC,CACJ,CAAC,CACH,CAAC,CACG,CAAC,CACT,CAAC,CACA,CACpB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}